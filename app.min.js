!function(){var e="http://api.bargainburg.co/v1/";App=Ember.Application.create({}),State={openCategories:{}},Ember.Handlebars.helper("price-glyphs",function(e){for(var t="",r=0;e>r;++r)t+="$";return t}),Ember.Handlebars.helper("open-cat",function(e){return State.openCategories[e]?"display:block;":"display:none;"}),Ember.Handlebars.registerHelper("isBusiness",function(e){return"merchant"===this.type?e.fn(this):e.inverse(this)}),App.Router.map(function(){this.resource("search",function(){this.resource("search.query",{path:":search_string"})}),this.resource("categories"),this.resource("businesses"),this.resource("business",{path:"/business/:id"}),this.resource("coupon",{path:"/coupon/:id"})}),App.IndexRoute=Ember.Route.extend({redirect:function(){this.transitionTo("categories")}}),App.CouponRoute=Ember.Route.extend({model:function(t){return Ember.$.getJSON(e+"/coupons/"+t.id+"/?callback=?")}}),App.SearchIndexRoute=Ember.Route.extend({controllerName:"search.query"}),App.SearchQueryRoute=Ember.Route.extend({model:function(t){return Ember.$.getJSON(e+"/search?query="+encodeURI(t.search_string)+"&callback=?")}}),App.SearchQueryController=Ember.ArrayController.extend({query:null,actions:{search:function(e){null===e||""===e?this.transitionToRoute("search.index"):this.transitionToRoute("search.query",e)}}}),App.CategoriesRoute=Ember.Route.extend({model:function(){return Ember.$.getJSON(e+"/categories?expand_merchants=1&callback=?")}}),App.CategoriesController=Ember.ArrayController.extend({actions:{toggleCategory:function(e){State.openCategories[e]=!State.openCategories[e]}}}),App.BusinessesRoute=Ember.Route.extend({model:function(){return Ember.$.getJSON(e+"/merchants?callback=?")}}),App.BusinessRoute=Ember.Route.extend({model:function(t){return Ember.$.getJSON(e+"/merchants/"+t.id+"?expand_coupons=1&callback=?")}}),App.LoadingRoute=Ember.Route.extend({}),$(document).ready(function(){$(document).on("click",".category-btn",function(){$(this).next().toggle("fast")}),$(document).on("click",".coupon",function(){alert($(this).data("name"))}),$(document).on("keypress","#search-bar",function(e){13===e.keyCode&&$("#search-button").click()}),$(document).on("click",".navbar-nav a",function(){$("#navbar-toggle").click()})})}();